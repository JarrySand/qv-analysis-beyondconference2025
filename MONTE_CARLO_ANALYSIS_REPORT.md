# Beyond Conference 2025 モンテカルロ分析レポート
## Quadratic Voting System における効用最大化仮説の検証

> **⚠️ 注意**: 本レポートは分析過程の暫定版です。研究手法、統計的検定、および解釈については継続的な検証と改善が行われており、最終的な結論は今後の精査を経て確定される予定です。

---

## 📋 目次

1. [背景と研究目的](#背景と研究目的)
2. [理論的フレームワーク](#理論的フレームワーク)
3. [モンテカルロシミュレーション手法](#モンテカルロシミュレーション手法)
4. [実装アルゴリズム](#実装アルゴリズム)
5. [分析結果](#分析結果)
6. [統計的検定](#統計的検定)
7. [感度分析](#感度分析)
8. [考察と含意](#考察と含意)
9. [結論](#結論)

---

## 🎯 背景と研究目的

### 研究背景

Quadratic Voting (QV) システムは、Glen Weyl と Eric Posner によって提唱された新しい投票制度で、投票者が各選択肢に対して投票数（強度）を選択でき、投票コストが投票数の二乗に比例するという特徴を持つ。理論的には、投票者は自身の選好強度に応じて効用を最大化するように投票するとされている。

### 研究目的

本研究では、Beyond Conference 2025 で実施されたQVシステムの実際の投票データを用いて、以下の仮説を検証する：

1. **効用最大化仮説**: 投票者は理論的に予測される効用最大化行動を取るか
2. **中立バイアス仮説**: 投票者は関心の低いプロジェクトに対しても形式的に投票する傾向があるか
3. **選好表現バイアス**: 投票者は理論的最適解よりも選好の差別化を重視するか

### データ概要

- **調査期間**: 2025年4月26日（Beyond Conference 2025）、2025年6月9日（オンライン追加投票）
- **投票者数**: 179名
- **総投票数**: 976票
- **対象プロジェクト数**: 7プロジェクト
- **最大クレジット**: 99クレジット/人

---

## 📚 理論的フレームワーク

### 効用最大化理論

QVシステムにおける理論的効用最大化モデルは以下の通り：

**効用関数**:
```
U = Σᵢ uᵢ × √vᵢ - λ × (Σᵢ vᵢ² - C)
```

**最適化条件**:
```
∂U/∂vᵢ = uᵢ/(2√vᵢ) - 2λvᵢ = 0
```

**最適投票数**:
```
vᵢ* = uᵢ / √(Σⱼ uⱼ² / C)
```

ここで：
- `uᵢ`: プロジェクトiに対する選好強度
- `vᵢ`: プロジェクトiへの投票数
- `C`: 最大クレジット数（99）
- `λ`: ラグランジュ乗数

### 理論的予測

効用最大化理論に基づくと、以下の投票分布が予測される：

1. **2票が最多**: 効用最大化の解として2票が最も頻繁に使用される
2. **1票は少数**: 選好強度が低い場合のみ1票を使用
3. **高票数は稀**: 6票以上はほとんど使用されない

---

## 🎲 モンテカルロシミュレーション手法

### 基本アプローチ

モンテカルロシミュレーションを用いて、理論的効用最大化モデルと実際の投票分布を比較する。

### シミュレーション設定

- **シミュレーション回数**: 1,000回
- **仮想投票者数**: 1,000人
- **プロジェクト数**: 7プロジェクト
- **最大クレジット**: 99クレジット

### 選好強度分布

複数の選好強度分布を検証：

1. **一様分布**: `U(0, 10)`
2. **正規分布**: `N(μ=5, σ=2)`
3. **べき乗分布**: `Pareto(α=1.5)`

---

## ⚙️ 実装アルゴリズム

### メインシミュレーション関数

```python
def simulate_optimal_votes(n_simulations=1000, n_projects=7, max_credits=99, 
                          preference_distribution='uniform', params=None):
    simulated_votes = []
    
    for _ in range(n_simulations):
        # Step 1: 選好強度の生成
        if preference_distribution == 'uniform':
            preferences = np.random.uniform(0, 10, n_projects)
        elif preference_distribution == 'normal':
            preferences = np.random.normal(5, 2, n_projects)
            preferences = np.clip(preferences, 0, None)
        
        # Step 2: 効用最大化計算
        denominator = np.sqrt(np.sum(preferences**2) / max_credits)
        if denominator > 0:
            optimal_votes = preferences / denominator
        else:
            optimal_votes = np.zeros(n_projects)
        
        # Step 3: 離散化
        discretized_votes = np.clip(np.round(optimal_votes), 0, 9)
        
        # Step 4: 正の投票のみ記録
        positive_votes = discretized_votes[discretized_votes > 0]
        simulated_votes.extend(positive_votes)
    
    return simulated_votes
```

### 拡張モデル（ゼロ投票を含む）

```python
def simulate_optimal_votes_with_zero(n_simulations=1000, n_projects=7, max_credits=99,
                                    indifference_threshold=0.5, decision_cost=0.2):
    simulated_votes = []
    
    for sim in range(n_simulations):
        preferences = np.random.uniform(0, 10, n_projects)
        
        # 無関心閾値と意思決定コストを適用
        adjusted_preferences = preferences - indifference_threshold - decision_cost
        adjusted_preferences = np.clip(adjusted_preferences, 0, None)
        
        final_votes = np.zeros(n_projects)
        credits_used = 0
        
        # 選好強度順にソート
        sorted_indices = np.argsort(-adjusted_preferences)
        
        for idx in sorted_indices:
            if adjusted_preferences[idx] <= 0:
                continue
                
            # 平方根公式による投票数計算
            optimal_votes = np.sqrt(adjusted_preferences[idx])
            votes = np.round(optimal_votes)
            
            # クレジット制約チェック
            cost = votes ** 2
            if credits_used + cost > max_credits:
                max_possible = int(np.sqrt(max_credits - credits_used))
                votes = max_possible
                cost = votes ** 2
            
            final_votes[idx] = votes
            credits_used += cost
            
            if credits_used >= max_credits:
                break
        
        simulated_votes.extend(final_votes)
    
    return simulated_votes
```

---

## 📊 分析結果

### 実際の投票分布

| 投票値 | 実際の票数 | 実際の割合 |
|--------|------------|------------|
| 0票    | -14        | -1.11%     |
| 1票    | 175        | 13.83%     |
| 2票    | 204        | 16.13%     |
| 3票    | 182        | 14.38%     |
| 4票    | 146        | 11.54%     |
| 5票    | 106        | 8.38%      |
| 6票    | 61         | 4.82%      |
| 7票    | 44         | 3.48%      |
| 8票    | 18         | 1.42%      |
| 9票    | 40         | 3.16%      |

### 理論的分布（効用最大化モデル）

| 投票値 | 理論的割合 | 実際の割合 | 差異    |
|--------|------------|------------|---------|
| 1票    | 8.05%      | 13.83%     | +5.79%  |
| 2票    | 39.13%     | 16.13%     | -23.01% |
| 3票    | 28.94%     | 14.38%     | -14.56% |
| 4票    | 15.23%     | 11.54%     | -3.69%  |
| 5票    | 6.44%      | 8.38%      | +1.94%  |
| 6票    | 2.21%      | 4.82%      | +2.61%  |
| 7票    | 0.00%      | 3.48%      | +3.48%  |
| 8票    | 0.00%      | 1.42%      | +1.42%  |
| 9票    | 0.00%      | 3.16%      | +3.16%  |

### コスト調整分布との比較

QVの二次コスト構造を考慮した理論分布：

| 投票値 | コスト | 期待割合 | 実際の割合 | 差異     |
|--------|--------|----------|------------|----------|
| 1票    | 1      | 64.94%   | 13.83%     | -51.11%  |
| 2票    | 4      | 16.24%   | 16.13%     | -0.11%   |
| 3票    | 9      | 7.22%    | 14.38%     | +7.16%   |
| 4票    | 16     | 4.06%    | 11.54%     | +7.48%   |
| 5票    | 25     | 2.60%    | 8.38%      | +5.78%   |

---

## 📈 統計的検定

### カイ二乗適合度検定

**従来の効用最大化モデル vs 実際のデータ**:
- カイ二乗値: 310.84
- 自由度: 3
- p値: < 0.00000001
- **結論**: 有意差あり（p < 0.05）

**コスト調整モデル vs 実際のデータ**:
- カイ二乗値: 1,133.45
- 自由度: 8
- p値: < 0.00000001
- **結論**: 有意差あり（p < 0.05）

### エントロピー分析

- **理論分布のエントロピー**: 1.26
- **実際の分布のエントロピー**: 2.07
- **差異**: 0.81

実際の投票分布は理論予測よりも**高いエントロピー**を示し、より多様な投票パターンが存在することを示している。

---

## 🔍 感度分析

### パラメータ最適化

拡張モデルにおける最適パラメータの探索：

**パラメータ範囲**:
- 無関心閾値: [0.5, 1.0, 1.5, 2.0]
- 意思決定コスト: [0.1, 0.2, 0.3, 0.4]

**最適パラメータ**:
- 無関心閾値: 1.5
- 意思決定コスト: 0.2
- ゼロ投票差異: 2.15%
- カイ二乗値: 245.67

### バイアス比率による影響分析

1票投票のバイアス比率を0.0から1.0まで変化させた場合の影響：

| バイアス比率 | 影響を受ける投票数 | 予算配分変化 |
|--------------|-------------------|--------------|
| 0.1          | 37票              | ±0.6%        |
| 0.3          | 113票             | ±2.3%        |
| 0.5          | 189票             | ±3.9%        |
| 1.0          | 379票             | ±9.3%        |

### プロジェクト別影響

**最も影響を受けるプロジェクト（バイアス比率1.0時）**:
1. Inatori Art Center Plan: -26.0%
2. JINEN TRAVEL: -24.8%
3. Politics to Festival Project: -21.6%

**最も影響を受けにくいプロジェクト**:
1. Bio Rice Field Project: -17.1%
2. Para Travel Support Team: -15.5%
3. Chiba Youth Center PRISM: -9.3%

---

## 💭 考察と含意

### 発見されたバイアス

#### 1. 中立バイアス（Neutral Bias）
- **現象**: 1票の使用が理論予測より5.79%多い
- **解釈**: 関心の低いプロジェクトにも「形式的投票」を行う傾向
- **心理的要因**: 社会的配慮、完全性への欲求

#### 2. 極端回避バイアス（Extremeness Aversion）
- **現象**: 理論的最適解の2票を避ける傾向（-23.01%）
- **解釈**: 中間的な投票値（3-5票）を好む
- **心理的要因**: 「2票では気持ちが伝わらない」という認知

#### 3. 強選好過剰表現バイアス
- **現象**: 高投票値（6-9票）が理論予測を大幅に上回る
- **解釈**: 強い支持を明確に示したい欲求
- **心理的要因**: 選好の差別化、表現欲求

### 行動経済学的解釈

#### 修正効用関数の提案

```
U = Σᵢ uᵢ × √vᵢ + α × Social_Utility + β × Expression_Utility
```

ここで：
- `Social_Utility`: 社会的配慮による効用
- `Expression_Utility`: 選好表現による効用
- `α, β`: 重み係数

#### 意思決定プロセスの段階性

1. **第1段階**: 純粋選好に基づく理論的最適化
2. **第2段階**: 社会的・心理的要因による調整
3. **第3段階**: 制約条件下での最終決定

### 制度設計への含意

#### QVシステムの改善提案

1. **投票者教育**:
   - 効用最大化の概念説明
   - 戦略的投票の重要性啓発

2. **UI/UX改善**:
   - バイアスを軽減するインターフェース設計
   - リアルタイム最適化提案機能

3. **制度パラメータ調整**:
   - 実際の行動パターンを考慮したクレジット配分
   - バイアス補正メカニズムの導入

#### 政策応用への示唆

1. **予算配分**:
   - バイアスを考慮した配分アルゴリズム
   - 真の選好を反映する補正手法

2. **参加型民主主義**:
   - QVシステムの限界理解
   - 補完的制度との組み合わせ

---

## 🎯 結論

### 主要な発見

1. **効用最大化仮説の部分的否定**: 実際の投票行動は理論的予測と有意に異なる（p < 0.001）

2. **複数バイアスの存在確認**: 中立バイアス、極端回避バイアス、強選好過剰表現バイアスが同時に作用

3. **高エントロピー分布**: 実際の投票は理論予測より多様で複雑なパターンを示す

4. **制度設計の重要性**: バイアスを考慮した制度設計が必要

### 学術的貢献

1. **理論検証**: Glen WeylのQV理論の実証的検証
2. **新バイアス発見**: QVシステム特有の行動バイアスの発見
3. **実用的知見**: 実際のQVシステム運用への示唆

### 今後の研究課題

1. **文化的要因**: 日本特有の社会的配慮がバイアスに与える影響
2. **学習効果**: 複数回投票による行動変化の分析
3. **最適制度設計**: バイアスを考慮した改良QVシステムの開発

### 実用的価値

本研究は、QVシステムの理論と実践のギャップを定量的に明らかにし、より効果的な参加型民主主義制度の設計に向けた重要な基礎データを提供している。特に、日本における初の大規模QV実装事例として、国際的にも価値の高い研究成果である。

---

## 📚 参考文献・データソース

- **実装コード**: `src/simulation/neutral_bias/simulate_utility_max_model.py`
- **分析結果**: `results/figures/neutral_bias/`
- **統計データ**: `results/data/vote_statistics.csv`
- **感度分析**: `results/figures/neutral_bias/sensitivity_analysis_results.csv`

---

*本レポートは Beyond Conference 2025 QV分析プロジェクトの一環として作成されました。*
*最終更新: 2025年6月* 